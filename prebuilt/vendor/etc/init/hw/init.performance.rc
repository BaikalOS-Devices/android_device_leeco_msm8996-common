on boot
    setprop "baikal.eng.perf.profile" "default"

    setprop "baikal.def.balance.csmin" "307200"
    setprop "baikal.def.balance.csmax" "1593600"
    setprop "baikal.def.balance.cgmin" "307200"
    setprop "baikal.def.balance.cgmax" "2150400"
    setprop "baikal.def.balance.gmin" "133"
    setprop "baikal.def.balance.gmax" "624"
    setprop "baikal.def.balance.cc" "2"

    setprop "baikal.def.limited.csmin" "307200"
    setprop "baikal.def.limited.csmax" "1228800"
    setprop "baikal.def.limited.cgmin" "307200"
    setprop "baikal.def.limited.cgmax" "1632000"
    setprop "baikal.def.limited.gmin" "133"
    setprop "baikal.def.limited.gmax" "624"
    setprop "baikal.def.limited.cc" "2"

    setprop "baikal.def.video.csmin" "307200"
    setprop "baikal.def.video.csmax" "1228800"
    setprop "baikal.def.video.cgmin" "307200"
    setprop "baikal.def.video.cgmax" "1632000"
    setprop "baikal.def.video.gmin" "133"
    setprop "baikal.def.video.gmax" "624"
    setprop "baikal.def.video.cc" "2"

    setprop "baikal.def.performance.csmin" "960000"
    setprop "baikal.def.performance.csmax" "1593600"
    setprop "baikal.def.performance.cgmin" "1036800"
    setprop "baikal.def.performance.cgmax" "2150400"
    setprop "baikal.def.performance.gmin" "133"
    setprop "baikal.def.performance.gmax" "624"
    setprop "baikal.def.performance.cc" "2"

    setprop "baikal.def.battery.csmin" "307200"
    setprop "baikal.def.battery.csmax" "1113600"
    setprop "baikal.def.battery.cgmin" "307200"
    setprop "baikal.def.battery.cgmax" "1248000"
    setprop "baikal.def.battery.gmin" "133"
    setprop "baikal.def.battery.gmax" "133"
    setprop "baikal.def.battery.cc" "1"

    setprop "baikal.def.gaming.csmin" "960000"
    setprop "baikal.def.gaming.csmax" "1593600"
    setprop "baikal.def.gaming.cgmin" "1036800"
    setprop "baikal.def.gaming.cgmax" "2150400"
    setprop "baikal.def.gaming.gmin" "315"
    setprop "baikal.def.gaming.gmax" "624"
    setprop "baikal.def.gaming.cc" "2"

    setprop "baikal.def.cc_off" "2"
    setprop "baikal.def.cc_on" "1"


on property:baikal.eng.perf.profile=default
    setprop "baikal.eng.perf.profile" "balance"

on property:sys.baikalos.power.ready=1
    setprop "baikal.eng.perf.profile" ${baikal.perf.profile:-"default"}

#on property:baikal.idle=0
#    setprop "baikal.eng.perf.profile" ${baikal.perf.profile:-"default"}

#on property:baikal.idle=1
#    setprop "baikal.eng.perf.profile" "idle"

on property:persist.baikal.core_ctl=1
    setprop sys.baikal.min_cpus 1
    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 1
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 1
    setprop "baikal.eng.perf.profile" ${baikal.eng.perf.profile:-"default"}

on property:persist.baikal.core_ctl=0
    setprop sys.baikal.min_cpus 2
    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2
    setprop "baikal.eng.perf.profile" ${baikal.eng.perf.profile:-"default"}

on property:persist.baikal.input_boost=1
    setprop sys.baikal.input_boost 1
    write /sys/module/cpu_input_boost/parameters/boost_enabled 1
    setprop "baikal.eng.perf.profile" ${baikal.eng.perf.profile:-"default"}

on property:persist.baikal.input_boost=0
    setprop sys.baikal.input_boost 0
    write /sys/module/cpu_input_boost/parameters/boost_enabled 0
    setprop "baikal.eng.perf.profile" ${baikal.eng.perf.profile:-"default"}


on property:persist.ps.fb_boost=0
    write /sys/module/mdss_fb/parameters/boost_on_frame 0

on property:persist.ps.fb_boost=1
    write /sys/module/mdss_fb/parameters/boost_on_frame 1


# Balance (default profile)
on property:baikal.eng.perf.profile=balance
    setprop "baikal.eng.perf.cur_profile" "balance"
    # Configure governor settings for little cluster

    write /sys/module/mdss_fb/parameters/boost_on_frame ${persist.ps.fb_boost:-0}
    setprop "baikal.perf.boost_on_frame" ${persist.ps.fb_boost:-0}

    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled ${sys.baikal.input_boost:-0}
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 64
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 1036800
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 1036800

    # Enable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "Y"
    write /sys/module/devfreq_boost/parameters/boost_all "Y"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    # Configure governor settings for little cluster

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.balance.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.balance.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.balance.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.balance.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 960000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "95 422400:80 480000:85 556800:80 652800:85 729600:85 844800:95 960000:95 1036800:99 1113600:99 1190400:99 1228800:99 1324800:99 1401600:99 1478400:99 1593600:99"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 1


    # Configure governor settings for big cluster

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.balance.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.balance.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.balance.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.balance.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "19000 1036800:20000 1400000:49000 1700000:49000 2100000:79000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 1036800
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "95 403200:80 480000:85 556800:85 652800:95 729600:95 806400:95 883200:95 940800:95 1036800:99 1113600:99 1190400:99 1248000:99 1324800:99 1401600:99 1478400:99 1555200:99 1632000:99 1708800:99 1785600:99 1824000:99 1920000:99 1996800:99 2073600:99 2150400:99"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 1

    # Re-enable thermal hotplug
    write /sys/module/msm_thermal/core_control/enabled 1
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Set big.LITTLE scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 0
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_freq_inc_notify 200000
    write /proc/sys/kernel/sched_freq_dec_notify 50000
    write /proc/sys/kernel/sched_spill_nr_run 50
    write /proc/sys/kernel/sched_spill_load 100
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 50
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 60
    write /proc/sys/kernel/sched_small_wakee_task_load 15

    write /proc/sys/kernel/sched_upmigrate_min_nice 9

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.balance.cc:-2}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.balance.cc:-2}

    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 75
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 75


    write /proc/sys/vm/swappiness 15
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0-3
    write /dev/cpuset/foreground/cpus 0-2
    write /dev/cpuset/background/cpus 0-1
    write /dev/cpuset/system-background/cpus 0-1
    write /dev/cpuset/restricted/cpus 0-1

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 307200000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 1593600000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 13763

    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 624000000

#    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 3

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 6
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 0
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.balance.gmin:-133}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.balance.gmax:-624}

# Balance Limited
on property:baikal.eng.perf.profile=limited
    setprop "baikal.eng.perf.cur_profile" "limited"
    # Configure governor settings for little cluster

    write /sys/module/mdss_fb/parameters/boost_on_frame ${persist.ps.fb_boost:-0}
    setprop "baikal.perf.boost_on_frame" ${persist.ps.fb_boost:-0}

    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled ${sys.baikal.input_boost:-0}
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 64
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 1036800
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 1036800

    # Enable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "Y"
    write /sys/module/devfreq_boost/parameters/boost_all "Y"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    # Configure governor settings for little cluster

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.limited.csmax:-1228800}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.limited.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.limited.csmax:-1228800}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.limited.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 960000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "95 422400:80 480000:85 556800:80 652800:95 729600:95 844800:95 960000:99 1036800:99 1113600:99 1190400:99 1228800:99 1324800:101 1401600:101 1478400:101 1593600:101"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 1


    # Configure governor settings for big cluster

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.limited.cgmax:-1632000}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.limited.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.limited.cgmax:-1632000}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.limited.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "19000 1036800:20000 1400000:49000 1700000:49000 2100000:79000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 1036800
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "95 403200:85 480000:85 556800:85 652800:95 729600:95 806400:95 883200:95 940800:95 1036800:99 1113600:99 1190400:99 1248000:99 1324800:99 1401600:99 1478400:99 1555200:99 1632000:99 1708800:101 1785600:101 1824000:101 1920000:101 1996800:101 2073600:101 2150400:101"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 1

    # Re-enable thermal hotplug
    write /sys/module/msm_thermal/core_control/enabled 1
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Set big.LITTLE scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 0
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_freq_inc_notify 200000
    write /proc/sys/kernel/sched_freq_dec_notify 50000
    write /proc/sys/kernel/sched_spill_nr_run 50
    write /proc/sys/kernel/sched_spill_load 100
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 50
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 60
    write /proc/sys/kernel/sched_small_wakee_task_load 15

    write /proc/sys/kernel/sched_upmigrate_min_nice 9

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.limited.cc:-2}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.limited.cc:-2}


    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 75
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 75

    write /proc/sys/vm/swappiness 15
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0-3
    write /dev/cpuset/foreground/cpus 0-2
    write /dev/cpuset/background/cpus 0-1
    write /dev/cpuset/system-background/cpus 0-1
    write /dev/cpuset/restricted/cpus 0-1

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 307200000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 1593600000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 13763

    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 624000000 

#    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 3

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 6
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 0
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.limited.gmin:-133}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.limited.gmax:-624}


# Balance (default profile)
on property:baikal.eng.perf.profile=video
    setprop "baikal.eng.perf.cur_profile" "video"

    # Configure governor settings for little cluster

    write /sys/module/mdss_fb/parameters/boost_on_frame 0
    setprop "baikal.perf.boost_on_frame" 0

    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled ${sys.baikal.input_boost:-0}
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 64
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 1036800
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 1036800

    # Enable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "Y"
    write /sys/module/devfreq_boost/parameters/boost_all "Y"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    # Configure governor settings for little cluster

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.video.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.video.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.video.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.video.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 960000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 1
#    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "50 422400:50 480000:65 556800:70 652800:70 729600:70 844800:70 960000:70 1036800:70 1113600:70 1190400:70 1228800:70 1324800:80 1401600:80 1478400:80 1593600:80"
#    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "50 422400:50 480000:65 556800:80 652800:80 729600:80 844800:80 960000:80 1036800:90 1113600:90 1190400:90 1228800:90 1324800:95 1401600:95 1478400:95 1593600:95"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "95 422400:80 480000:85 556800:80 652800:85 729600:85 844800:95 960000:95 1036800:95 1113600:99 1190400:99 1228800:99 1324800:99 1401600:99 1478400:99 1593600:99"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 1


    # Configure governor settings for big cluster

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.video.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.video.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.video.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.video.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "25000 1400000:49000 1700000:49000 2100000:79000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 101
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 1036800
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "95 403200:85 480000:85 556800:85 652800:85 729600:85 806400:85 883200:85 940800:85 1036800:85 1113600:99 1190400:99 1248000:99 1324800:99 1401600:99 1478400:99 1555200:99 1632000:99 1708800:99 1785600:99 1824000:99 1920000:99 1996800:99 2073600:99 2150400:99"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 1

    # Re-enable thermal hotplug
    write /sys/module/msm_thermal/core_control/enabled 1
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Set big.LITTLE scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 0
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_upmigrate 99
    write /proc/sys/kernel/sched_downmigrate 95
    write /proc/sys/kernel/sched_freq_inc_notify 200000
    write /proc/sys/kernel/sched_freq_dec_notify 50000
    write /proc/sys/kernel/sched_spill_nr_run 50
    write /proc/sys/kernel/sched_spill_load 100
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 50
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 60
    write /proc/sys/kernel/sched_small_wakee_task_load 15

    write /proc/sys/kernel/sched_upmigrate_min_nice 9

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.video.cc:-2}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.video.cc:-2}


    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 75
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 55
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 75

    write /proc/sys/vm/swappiness 15
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0-3
    write /dev/cpuset/foreground/cpus 0-2
    write /dev/cpuset/background/cpus 0-1
    write /dev/cpuset/system-background/cpus 0-1
    write /dev/cpuset/restricted/cpus 0-1

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 307200000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 1593600000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 13763

    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 624000000 

#    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 3

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 6
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 0
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.video.gmin:-133}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.video.gmax:-624}



# Performance (based on DrunkSauce Lite)
on property:baikal.eng.perf.profile=performance
    setprop "baikal.eng.perf.cur_profile" "performance"

    write /sys/module/mdss_fb/parameters/boost_on_frame ${persist.ps.fb_boost:-0}
    setprop "baikal.perf.boost_on_frame" ${persist.ps.fb_boost:-0}

    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled "Y"
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 256
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 2150400
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 1593600

    # Enable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "Y"
    write /sys/module/devfreq_boost/parameters/boost_all "Y"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"

    # Configure governor settings for little cluster
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.performance.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.performance.csmin:-960000}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.performance.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.performance.csmin:-960000}

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 1593600
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "80 422400:80 480000:80 556800:80 652800:80 729600:80 844800:80 960000:80 1036800:90 1113600:90 1190400:90 1228800:90 1324800:95 1401600:95 1478400:95 1593600:95"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 0

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 80
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 80

    # Configure governor settings for big cluster

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.performance.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.performance.cgmin:-1036800}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.performance.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.performance.cgmin:-1036800}

    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "19000 1400000:20000 1700000:20000 2100000:20000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 2150400
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "80 403200:80 480000:80 556800:80 652800:80 729600:80 806400:80 883200:80 940800:80 1036800:90 1113600:90 1190400:90 1248000:90 1324800:90 1401600:90 1478400:90 1555200:95 1632000:95 1708800:95 1785600:95 1824000:95 1920000:95 1996800:95 2073600:95 2150400:95"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 0

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Setting b.L scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 1
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 75
    write /proc/sys/kernel/sched_downmigrate 50
    write /proc/sys/kernel/sched_upmigrate 75
    write /proc/sys/kernel/sched_downmigrate 50
    write /proc/sys/kernel/sched_freq_inc_notify 40000
    write /proc/sys/kernel/sched_freq_dec_notify 200000
    write /proc/sys/kernel/sched_spill_nr_run 12
    write /proc/sys/kernel/sched_spill_load 70
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 12
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 12
    write /proc/sys/kernel/sched_small_wakee_task_load 10

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 200
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 400
    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 200
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 400
    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 20
    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 20

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.performance.cc:-2}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.performance.cc:-2}

    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 0
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 0
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 0
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 0

    write /proc/sys/vm/swappiness 10
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0-3
    write /dev/cpuset/foreground/cpus 0-3
    write /dev/cpuset/background/cpus 0-3
    write /dev/cpuset/system-background/cpus 0-3
    write /dev/cpuset/restricted/cpus 0-3

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 5859
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 5859
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 5859
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 902400000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 1593600000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 5928
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 5928
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 13763

    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 624000000 

    #write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 1

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 6
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 0
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.performance.gmin:-133}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.performance.gmax:-624}

# Battery
on property:baikal.eng.perf.profile=battery
    setprop "baikal.eng.perf.cur_profile" "battery"

    write /sys/module/mdss_fb/parameters/boost_on_frame 0
    setprop "baikal.perf.boost_on_frame" 0


    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled "N"
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 0
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 307200
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 307200

    # Disable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "N"
    write /sys/module/devfreq_boost/parameters/boost_all "N"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"

    # Configure governor settings for little cluster
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.battery.csmax:-1113600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.battery.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.battery.csmax:-1113600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.battery.csmin:-307200}

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 307200
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "95 422400:95 480000:95 556800:95 652800:95 729600:95 844800:99 960000:99 1036800:99 1113600:99 1190400:99 1228800:99 1324800:99 1401600:99 1478400:99 1593600:99"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 1

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 150
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 150

    # Configure governor settings for big cluster
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.battery.cgmax:-1248000}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.battery.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.battery.cgmax:-1248000}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.battery.cgmin:-307200}

    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "25000 1400000:49000 1700000:49000 2100000:79000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 307200
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "95 403200:95 480000:95 556800:95 652800:95 729600:95 806400:99 940800:99 1036800:99 1113600:99 1190400:99 1248000:99 1324800:99 1401600:99 1478400:99 1555200:99 1632000:99 1708800:99 1785600:99 1824000:99 1920000:99 1996800:99 2073600:99 2150400:99"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 1

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 1
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Setting b.L scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 0
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 95
    write /proc/sys/kernel/sched_downmigrate 75
    write /proc/sys/kernel/sched_upmigrate 95
    write /proc/sys/kernel/sched_downmigrate 75
    write /proc/sys/kernel/sched_freq_inc_notify 400000
    write /proc/sys/kernel/sched_freq_dec_notify 40000
    write /proc/sys/kernel/sched_spill_nr_run 50
    write /proc/sys/kernel/sched_spill_load 100
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 50
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 110
    write /proc/sys/kernel/sched_small_wakee_task_load 10

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 20
    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 20
    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 1000
    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 500
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 1000

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.battery.cc:-1}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.battery.cc:-1}

    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 65
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 75
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 85
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 95

    write /proc/sys/vm/swappiness 40
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0,2
    write /dev/cpuset/foreground/cpus 0,2
    write /dev/cpuset/background/cpus 0
    write /dev/cpuset/system-background/cpus 0
    write /dev/cpuset/restricted/cpus 0

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 0

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 762

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 762

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 762
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 762

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 307200000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 307200000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 1525
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 1525


    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 133000000 

    #write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 0

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 6
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 6
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.performance.gmin:-133}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.performance.gmax:-133}


# Gaming
on property:baikal.eng.perf.profile=gaming
    setprop "baikal.eng.perf.cur_profile" "gaming"

    write /sys/module/mdss_fb/parameters/boost_on_frame 0
    setprop "baikal.perf.boost_on_frame" 0


    # Enable cpufreq boost
    write /sys/module/cpu_input_boost/parameters/boost_enabled "Y"
    write /sys/module/cpu_input_boost/parameters/input_boost_duration 256
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_hp 2150400
    write /sys/module/cpu_input_boost/parameters/input_boost_freq_lp 1593600

    # Enable devrfreq boost
    write /sys/module/devfreq_boost/parameters/boost_enabled "Y"
    write /sys/module/devfreq_boost/parameters/boost_all "Y"

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 0
    write /sys/module/msm_thermal/parameters/enabled "N"

    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus 2
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus 2

    write /sys/devices/system/cpu/cpu0/online 1
    write /sys/devices/system/cpu/cpu1/online 1
    write /sys/devices/system/cpu/cpu2/online 1
    write /sys/devices/system/cpu/cpu3/online 1

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor "interactive"
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_governor "interactive"

    # Configure governor settings for little cluster
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.gaming.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.gaming.csmin:-960000}

    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq ${persist.bkp.gaming.csmax:-1593600}
    write /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq ${persist.bkp.gaming.csmin:-960000}

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay "19000 480000:20000 960000:20000"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq 1593600
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads "80 422400:80 480000:80 556800:80 652800:80 729600:80 844800:80 960000:80 1036800:80 1113600:80 1190400:80 1228800:80 1324800:85 1401600:85 1478400:85 1593600:85"
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis 49000
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/fast_ramp_down 0
    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/enable_prediction 0

    write /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load 60
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/go_hispeed_load 50

    # Configure governor settings for big cluster
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.gaming.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.gaming.cgmin:-1036800}

    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_max_freq ${persist.bkp.gaming.cgmax:-2150400}
    write /sys/devices/system/cpu/cpu2/cpufreq/scaling_min_freq ${persist.bkp.gaming.cgmin:-1036800}

    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_sched_load 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/use_migration_notif 1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/above_hispeed_delay "19000 1400000:20000 1700000:20000 2100000:20000"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/boost 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_rate 25000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/timer_slack -1
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/hispeed_freq 2150400
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/io_is_busy 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/target_loads "80 403200:80 480000:80 556800:80 652800:80 729600:80 806400:80 883200:80 940800:80 1036800:80 1113600:80 1190400:80 1248000:90 1324800:90 1401600:90 1478400:90 1555200:90 1632000:95 1708800:95 1785600:95 1824000:95 1920000:95 1996800:95 2073600:95 2150400:95"
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/min_sample_time 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/max_freq_hysteresis 19000
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/ignore_hispeed_on_notif 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/fast_ramp_down 0
    write /sys/devices/system/cpu/cpu2/cpufreq/interactive/enable_prediction 0

    # Re-enable thermal and BCL hotplug
    write /sys/module/msm_thermal/core_control/enabled 1
    write /sys/module/msm_thermal/parameters/enabled "Y"

    # Setting b.L scheduler parameters
    write /proc/sys/kernel/sched_window_stats_policy 1
    write /proc/sys/kernel/sched_boost 1
    write /proc/sys/kernel/sched_migration_fixup 1
    write /proc/sys/kernel/sched_upmigrate 60
    write /proc/sys/kernel/sched_downmigrate 30
    write /proc/sys/kernel/sched_upmigrate 60
    write /proc/sys/kernel/sched_downmigrate 30
    write /proc/sys/kernel/sched_freq_inc_notify 20000
    write /proc/sys/kernel/sched_freq_dec_notify 400000
    write /proc/sys/kernel/sched_spill_nr_run 12
    write /proc/sys/kernel/sched_spill_load 50
    write /proc/sys/kernel/sched_init_task_load 10
    write /proc/sys/kernel/sched_big_waker_task_load 12
    write /proc/sys/kernel/sched_small_task 15
    write /proc/sys/kernel/sched_wakeup_load_threshold 12
    write /proc/sys/kernel/sched_small_wakee_task_load 10


    write /sys/devices/system/cpu/cpu0/core_ctl/min_cpus ${persist.bkp.gaming.cc:-2}
    write /sys/devices/system/cpu/cpu2/core_ctl/min_cpus ${persist.bkp.gaming.cc:-2}

    write /sys/devices/system/cpu/cpu0/core_ctl/busy_down_thres 0
    write /sys/devices/system/cpu/cpu0/core_ctl/busy_up_thres 0
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_down_thres 0
    write /sys/devices/system/cpu/cpu2/core_ctl/busy_up_thres 0

    write /proc/sys/vm/swappiness 10
    write /proc/sys/vm/vfs_cache_pressure 100

    write /dev/cpuset/top-app/cpus 0-3
    write /dev/cpuset/foreground/cpus 0-3
    write /dev/cpuset/background/cpus 0-3
    write /dev/cpuset/system-background/cpus 0-3
    write /dev/cpuset/restricted/cpus 0-3

    write "/sys/class/devfreq/soc:qcom,cpubw/min_freq" 13763
    write "/sys/class/devfreq/soc:qcom,cpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,mincpubw/min_freq" 13763
    write "/sys/class/devfreq/soc:qcom,mincpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,gpubw/min_freq" 13763
    write "/sys/class/devfreq/soc:qcom,gpubw/max_freq" 13763

    write "/sys/class/devfreq/soc:qcom,m4m/min_freq" 1593600000
    write "/sys/class/devfreq/soc:qcom,m4m/max_freq" 1593600000

    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/min_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu0/max_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/min_freq" 13763
    write "/sys/class/devfreq/soc:qcom,memlat-cpu2/max_freq" 13763

    write /sys/devices/system/cpu/cpu0/sched_static_cpu_pwr_cost 200
    write /sys/devices/system/cpu/cpu0/sched_static_cluster_pwr_cost 400
    write /sys/devices/system/cpu/cpu1/sched_static_cpu_pwr_cost 200
    write /sys/devices/system/cpu/cpu1/sched_static_cluster_pwr_cost 400
    write /sys/devices/system/cpu/cpu2/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu2/sched_static_cluster_pwr_cost 20
    write /sys/devices/system/cpu/cpu3/sched_static_cpu_pwr_cost 10
    write /sys/devices/system/cpu/cpu3/sched_static_cluster_pwr_cost 20


    write "/sys/class/kgsl/kgsl-3d0/devfreq/min_freq" 133000000
    write "/sys/class/kgsl/kgsl-3d0/devfreq/max_freq" 624000000

#    write /sys/class/kgsl/kgsl-3d0/devfreq/adrenoboost 1

    write /sys/class/kgsl/kgsl-3d0/default_pwrlevel 0
    write /sys/class/kgsl/kgsl-3d0/max_pwrlevel 0
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/min_clock_mhz" ${persist.bkp.gaming.gmax:-315}
    write "/sys/devices/soc/b00000.qcom,kgsl-3d0/kgsl/kgsl-3d0/max_clock_mhz" ${persist.bkp.gaming.gmax:-624}

#on property:baikal.eng.perf.profile=*
#    setprop "baikal.eng.perf.profile" "default"

